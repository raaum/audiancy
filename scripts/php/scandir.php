<?php

#######################################################################
# path to a directory to scan
#######################################################################

$dir = "audio";

#######################################################################
# extensions to match
#######################################################################

$extensions = "MP3, WAV, OGG";

#######################################################################
# put our extensions into an array so we can loop through then later
#######################################################################

$extensionlist = array($extensions);

#######################################################################
# result - will contain our matches
#######################################################################

$result = ""; # this will contain our matches

#######################################################################
# directory handle / open directory, making sure it is a directory
#######################################################################

if (is_dir($dir)){ 

  if ($dh = opendir($dir)){

    while (($filename = readdir($dh)) !== false) { # read filenames


      #################################################################
      # OPTION 1
      # -----------------
      # Return case sensitive .mp3 filenames.
      #################################################################
      #
      # if (strpos($filename,'.mp3') !== false) {
      #
      #   $files[] = $filename;
      #
      # }
      #################################################################



      #################################################################
      # OPTION 2
      # -----------------
      # Return filenames matching a single $extension.
      # Compare case insensitive extensions to get our array.
      #################################################################
      #
      # $info = pathinfo($filename);
      #
      # if (strncasecmp($info["extension"],$extension,3) == 0) {
      #
      #   $files[] = $filename;
      #
      # }
      #################################################################



      #################################################################
      # OPTION 3
      # -----------------
      # Return filenames matching multiple extensions.
      #################################################################
  
      $info = pathinfo($filename);

      foreach ($extensionlist as $ext) {

        if (strncasecmp($info["extension"],$ext,3) == 0) {

          $files[] = $filename;

        }      

      } # end of foreach and option 3

      #################################################################



    } # end of while
    
    ###################################################################
    # close our directory handle
    ###################################################################

    closedir($dh);

  } # end of opendir

} # end of if is_dir

#######################################################################
# sort file alphabetically, case insensitive
#######################################################################

natcasesort($files);

#######################################################################
# loop through array of files and separate them by a comma 
# for our result
#######################################################################

foreach($files as $child) { $result .= $child . ","; }

#######################################################################
// trime trailing comma
#######################################################################

$result = rtrim($result, ",");

#######################################################################
# return result
#######################################################################

echo($result);

?>


